<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Awareness Hub</title>

    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- need to npm install chart.js first-->
    <!-- link to awareness-hub.css for styling  -->
    <link rel="stylesheet" href="awareness-hub.css">
</head>

<body>
    <div class="container-fluid">
        <!-- nav bar to recipe finder and educational resources -->
        <div>
            <nav class="navbar navbar-expand bg-body-primary">
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="./awareness-hub.html">Awareness
                                Hub</a><!-- chg naming ltr -->
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Recipe finder</a> <!-- chg link and naming ltr -->
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Game/Quiz</a> <!-- chg link and naming ltr -->
                        </li>
                    </ul>
                </div>
            </nav>
        </div>

        <!-- get newest food insecurity news data from news api: -->
        <script>
            axios.get("https://newsapi.org/v2/everything?q=food+waste&language=en&apiKey=373c5eb1757b49cea601fbc78276d455") //need to store api key in env?
                .then(response => {
                    console.log(response.data); //why error
                    let articles = response.data.articles;

                    let article1 = articles[0];
                    let title1 = article1.title;
                    let desc1 = article1.description;
                    let url1 = article1.url;
                    let image1URL = article1.urlToImage;

                    let article2 = articles[1];
                    let title2 = article2.title;
                    let desc2 = article2.description;
                    let url2 = article2.url;
                    let image2URL = article2.urlToImage;

                    let article3 = articles[2];
                    let title3 = article3.title;
                    let desc3 = article3.description;
                    let url3 = article3.url;
                    let image3URL = article3.urlToImage;

                    let article4 = articles[3];
                    let title4 = article4.title;
                    let desc4 = article4.description;
                    let url4 = article4.url;
                    let image4URL = article4.urlToImage;

                })
                .catch(error => {
                    console.log(error.message);
                });
        </script>

        <!-- display 4 latest food insecurity news using data retrieved frm api: -->
        <div>
            <h1 class="heading">Latest food waste news</h1>
            <!-- display news links, title and img-->
            <div class="row justify-content-center">
                <div class="card" style="width: 18rem;">
                    <img src="..." class="card-img-top">
                    <div class="card-body">
                        <h5 class="card-title">News title</h5>
                        <p class="card-text">news description</p>
                        <a href="#" class="btn btn-primary">Link</a>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <img src="..." class="card-img-top">
                    <div class="card-body">
                        <h5 class="card-title">News title</h5>
                        <p class="card-text">news description</p>
                        <a href="#" class="btn btn-primary">Link</a>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <img src="..." class="card-img-top">
                    <div class="card-body">
                        <h5 class="card-title">News title</h5>
                        <p class="card-text">news description</p>
                        <a href="#" class="btn btn-primary">Link</a>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <img src="..." class="card-img-top">
                    <div class="card-body">
                        <h5 class="card-title">News title</h5>
                        <p class="card-text">news description</p>
                        <a href="#" class="btn btn-primary">Link</a>
                    </div>
                </div>
            </div>

        </div>

        <hr>


        <!-- display charts for food insecurity data -->
        <div>
            <h1 class="heading">Food insecurity around the world</h1>

            <div>
                <h3>As of September 30 2024:
                    <ul>
                        <li>The number of people projected to be in food insecurity and malnutrition catastrophe
                            (Integrated Food Security Phase Classification (IPC) Phase 5) has surged, increasing from
                            705,000 in 2023 to 1.9 million in 2024.</li>
                        <li>Global undernourishment remains alarmingly persistent, with an estimated 713 million to 757
                            million people affected in 2023.</li>
                    </ul>
                </h3>
            </div>

            <br><br>

            <div>
                <canvas id="barChart"></canvas>
                <br>
                <h5>From 2023 peak to mid 2024, there has been an increase of at least 1 million ppl facing high levels
                    of acute food insecurity in countries like Yemen, Ethiopia, Myanmar, Sudan, Nigeria, Malawi, Zimbabwe, and Chad.
                </h5>
                <br>
                <small>
                    Source: <a
                        href="https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2024-MYU-en.pdf">https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2024-MYU-en.pdf</a>
                </small>
            </div>

            <br><br>

            <div class="row">
                <div class="col-6">
                    <h4># of ppl in Yemen with high levels of acute food insecurity(IPC/CH phase 3 or above or
                        equivalent) in 2022 <br>( Millions )</h4>
                    <br>
                    <canvas id="doughnutChartYemen"></canvas>
                    <br>
                    <h5>In 2022, IPC/CH phase3+ took up 55% of the whole population of Yemen.</h5>
                </div>
                <div class="col-6">
                    <h4># of ppl in Afghanistan with high levels of acute food insecurity(IPC/CH phase 3 or above or
                        equivalent) in 2022 <br>( Millions )</h4>
                    <br>
                    <canvas id="doughnutChartAfghan"></canvas>
                    <br>
                    <h5> In 2022, IPC/CH phase3+ took up 46% of the whole population of Afghanistan.</h5>
                </div>
                <br>
                <small>
                    Source: <a
                        href="https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2023-In-Brief-EN.pdf">https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2023-In-Brief-EN.pdf</a>
                </small>
            </div>
        </div>

        <script>
            const bar = document.getElementById('barChart');
            new Chart(bar, {
                type: 'bar',
                data: {
                    labels: ['Yemen', 'Ethiopia', 'Myanmar', 'Sudan', 'Nigeria', 'Malawi', 'Zimbabwe', 'Chad'],
                    datasets: [{
                        label: 'Increase in # of ppl facing high levels of acute food insecurity between peak 2023 and mid 2024 ( Millions )',
                        data: [1, 2.3, 2.6, 5.3, 6.9, 1.3, 1.5, 1.1],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.3)',
                            'rgba(255, 159, 64, 0.3)',
                            'rgba(255, 205, 86, 0.3)',
                            'rgba(75, 192, 192, 0.3)',
                            'rgba(54, 162, 235, 0.3)',
                            'rgb(0, 0, 139,0.3)',
                            'rgba(153, 102, 255, 0.3)',
                            'rgba(201, 203, 207, 0.3)',
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(255, 159, 64)',
                            'rgb(255, 205, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(54, 162, 235)',
                            'rgb(0, 0, 139)',
                            'rgb(153, 102, 255)',
                            'rgb(201, 203, 207)'
                        ],
                        hoverBackgroundColor:[
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                        ],
                        hoverBorderColor:[
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            const doughnutYemen = document.getElementById('doughnutChartYemen');
            new Chart(doughnutYemen, {
                type: 'doughnut',
                data: {
                    labels: ['Phase 3', 'Phase 4', 'Phase 5'],
                    datasets: [{
                        data: [11.7, 5.6, 0.031],
                        hoverBackgroundColor: ['white', 'white', 'white']
                    }]
                }
            });

            const doughnutAfghan = document.getElementById('doughnutChartAfghan');
            new Chart(doughnutAfghan, {
                type: 'doughnut',
                data: {
                    labels: ['Phase 3', 'Phase 4'],
                    datasets: [{
                        data: [13.8, 6.1],
                        backgroundColor: ['purple', 'grey'],
                        hoverBackgroundColor: ['white', 'white']
                    }]
                }
            });
        </script>


        <!--display info on impacts of food insecurity: -->
        <hr>

        <div>
            <h1 class="heading">Impacts of food insecurity</h1>
            <div class="row">
                <div class="col-6">
                    <div id="impact1">
                        <h5 class="issue">Health Issues:</h5>
                        <span v-if="showText">
                            <h5 class="impactText">Food insecurity can lead to malnutrition, which can cause slower
                                growth in children,
                                weakened immune systems, and increased susceptibility to diseases. Chronic hunger can
                                also
                                contribute to
                                conditions such as anemia, heart disease, and diabetes.</h5>
                        </span>
                        <button v-else v-on:click="showText=true"><img v-bind:src="malnutritionPic" v-bind:width="width"
                                v-bind:height="height"></img></button>
                    </div>
                </div>
                <div class="col-6">
                    <div id="impact2">
                        <h5 class="issue">Social Inequality:</h5>
                        <span v-if="showText">
                            <h5 class="impactText">Food insecurity often disproportionately affects marginalized
                                communities, worsening
                                existing inequalities in society and leading to social unrest or migration as people
                                seek
                                more stable
                                sources of food and livelihoods elsewhere.</h5>
                        </span>
                        <button v-else v-on:click="showText=true"><img v-bind:src="socialPic" v-bind:width="width"
                                v-bind:height="height"></img></button>
                    </div>
                </div>
            </div>

            <br>

            <div class="row">
                <div class="col-6">
                    <div id="impact3">
                        <h5 class="issue">Climate Change Effects:</h5>
                        <span v-if="showText">
                            <h5 class="impactText">As climate change intensifies, extreme weather events like droughts,
                                floods, and
                                heatwaves
                                become more frequent, exacerbating food shortages. At the same time, food-insecure
                                regions
                                often rely on
                                unsustainable agricultural practices (like slash-and-burn) that contribute to greenhouse
                                gas
                                emissions, further worsening climate change and the environment we live in.</h5>
                        </span>
                        <button v-else v-on:click="showText=true"><img v-bind:src="climateChgPic" v-bind:width="width"
                                v-bind:height="height"></img></button>
                    </div>
                </div>
                <div class="col-6">
                    <div id="impact4">
                        <h5 class="issue">Biodiversity Loss:</h5>
                        <span v-if="showText">
                            <h5 class="impactText">The conversion of forests, wetlands, and grasslands into agricultural
                                land due to the
                                pressure to grow more food can severely disrupt ecosystems and lead to the extinction of
                                species.
                            </h5>
                        </span>
                        <button v-else v-on:click="showText=true"><img v-bind:src="biodiversityPic" v-bind:width="width"
                                v-bind:height="height"></img></button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        Vue.createApp({
            data() {
                return {
                    showText: false,
                    malnutritionPic: "../images/malnutrition.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact1')

        Vue.createApp({
            data() {
                return {
                    showText: false,
                    socialPic: "../images/social.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact2')

        Vue.createApp({
            data() {
                return {
                    showText: false,
                    climateChgPic: "../images/climate-chg.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact3')

        Vue.createApp({
            data() {
                return {
                    showText: false,
                    biodiversityPic: "../images/biodiversity-loss.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact4') 
    </script>


    <!-- bootstrap js-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>