<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Awareness Hub</title>

    <!-- import axios, bootstrap css, vue -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

</head>

<body>
    <script>
        //get data from api:

        //arr of countries w acute,current food insecurity(phase 3)
        const acutePhase3Arr = [];
        //arr of countries w acute,current food insecurity(phase 4)
        const acutePhase4Arr = [];
        //arr of countries w acute,current food insecurity(phase 5)
        const acutePhase5Arr = [];
        axios.get("https://api.ipcinfo.org/areas?type=A&key=") //put in API key
            .then(response => {
                let datas = response.data;
                for (data of datas) {
                    let period = data.period;
                    let overallPhase = data.overall_phase;
                    let country = data.country;
                    if (period == "C") {
                        if (overallPhase == 3) {
                            let worstPopPhase3 = data.phase3_worse_population;
                            acutePhase3Arr.push([country, worstPopPhase3]);
                        }
                        else if (overallPhase == 4) {
                            let worstPopPhase4 = data.phase4_worse_population;
                            acutePhase4Arr.push([country, worstPopPhase4]);
                        }
                        else if (overallPhase == 5 || overallPhase == 6) {
                            let worstPopPhase5 = data.phase5_worse_population;
                            acutePhase5Arr.push([country, worstPopPhase5]);
                        }
                    }
                }
            })
            .catch(error => {
                console.log(error.message);
            })
    </script>

    <div class="container-fluid">
        <!-- nav bar to recipe finder and educational resources -->
        <nav class="navbar navbar-expand bg-body-tertiary">
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="./awareness-hub.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Recipe finder</a> <!-- chg link and naming ltr -->
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Educational</a> <!-- chg link and naming ltr -->
                    </li>
                </ul>
            </div>
        </nav>

        <!-- display data visualisations of food insecurity from api: -->
        <div>
            <h3 style="text-decoration: underline;">Countries with severe acute food insecurity</h3>
        </div>
        <!-- display acute data in chart-->


        <!--display info on impacts of food insecurity: -->
        <h3 style="text-decoration: underline;">Impacts of food insecurity</h3>
        <div class="row">
            <div class="col-6">
                <div id="impact1">
                    <h5>Health Issues:</h5>
                    <span v-if="showText">
                        <h5>Food insecurity can lead to malnutrition, which can cause slower growth in children,
                            weakened immune systems, and increased susceptibility to diseases. Chronic hunger can also contribute to
                            conditions such as anemia, heart disease, and diabetes.<br><br></h5>
                    </span>
                    <button v-else v-on:click="showText=true"><img v-bind:src="malnutritionPic" v-bind:width="width"
                            v-bind:height="height"></img></button>
                </div>
            </div>
            <div class="col-6">
                <div id="impact2">
                    <h5>Social Inequality:</h5>
                    <span v-if="showText">
                        <h5>Food insecurity often disproportionately affects marginalized communities, worsening
                            existing inequalities in society and leading to social unrest or migration as people seek more stable
                            sources of food and livelihoods elsewhere.<br><br></h5>
                    </span>
                    <button v-else v-on:click="showText=true"><img v-bind:src="socialPic" v-bind:width="width"
                            v-bind:height="height"></img></button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-6">
                <div id="impact3">
                    <h5>Climate Change Effects:</h5>
                    <span v-if="showText">
                        <h5>As climate change intensifies, extreme weather events like droughts, floods, and heatwaves
                            become more frequent, exacerbating food shortages. At the same time, food-insecure regions often rely on
                            unsustainable agricultural practices (like slash-and-burn) that contribute to greenhouse gas
                            emissions, further worsening climate change and the environment we live in.<br><br></h5>
                    </span>
                    <button v-else v-on:click="showText=true"><img v-bind:src="climateChgPic" v-bind:width="width"
                            v-bind:height="height"></img></button>
                </div>
            </div>
            <div class="col-6">
                <div id="impact4">
                    <h5>Biodiversity Loss:</h5>
                    <span v-if="showText">
                        <h5>The conversion of forests, wetlands, and grasslands into agricultural land due to the
                            pressure to grow more food can severely disrupt ecosystems and lead to the extinction of species.<br><br>
                        </h5>
                    </span>
                    <button v-else v-on:click="showText=true"><img v-bind:src="biodiversityPic" v-bind:width="width"
                            v-bind:height="height"></img></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        Vue.createApp({
            data() {
                return {
                    showText: false,
                    malnutritionPic: "../images/malnutrition.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact1')

        Vue.createApp({
            data() {
                return {
                    showText: false,
                    socialPic: "../images/social.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact2')

        Vue.createApp({
            data() {
                return {
                    showText: false,
                    climateChgPic: "../images/climate-chg.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact3')

        Vue.createApp({
            data() {
                return {
                    showText: false,
                    biodiversityPic: "../images/biodiversity-loss.png",
                    width: 500,
                    height: 300
                }
            }
        }).mount('#impact4') 
    </script>


    <!-- import bootstrap js-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>