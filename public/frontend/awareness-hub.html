<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Awareness Hub</title>

    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- need to npm install chart.js first-->
    <!-- link to awareness-hub.css for styling  -->
    <link rel="stylesheet" href="awareness-hub.css">
</head>

<body>
    <div class="container-fluid">
        <!-- nav bar to recipe finder and educational resources -->
        <div>
            <nav class="navbar navbar-expand bg-body-primary">
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="./awareness-hub.html">Awareness
                                Hub</a><!-- chg naming ltr -->
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Recipe finder</a> <!-- chg link and naming ltr -->
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Game/Quiz</a> <!-- chg link and naming ltr -->
                        </li>
                    </ul>
                </div>
            </nav>
        </div>

        <!-- get newest food insecurity news data from news api: -->
        <script>
            axios.get("https://api.thenewsapi.com/v1/news/all?api_token=m4BloEFuNj1BwjjqNzYmOUm0iIHUPyh5ztuZJcLc&language=en&search=food+wastage|food+insecurity") //need to store api key in env?
                .then(response => {
                    console.log(response.data);
                    let newsArr = response.data.data;

                    let news1 = newsArr[0];
                    console.log(news1);
                    let title1 = news1.title;
                    let url1 = news1.url;
                    let a1 = document.createElement('a');
                    a1.setAttribute('href', url1);
                    a1.innerText = title1;
                    document.getElementById('news1Title').appendChild(a1);
                    let desc1 = news1.description;
                    document.getElementById('news1Desc').innerText = desc1;
                    let pic1URL = news1.image_url;
                    document.getElementById('news1Img').src = pic1URL;

                    let news2 = newsArr[1];
                    let title2 = news2.title;
                    let url2 = news2.url;
                    let a2 = document.createElement('a');
                    a2.setAttribute('href', url2);
                    a2.innerText = title2;
                    document.getElementById('news2Title').appendChild(a2);
                    let desc2 = news2.description;
                    document.getElementById('news2Desc').innerText = desc2;
                    let pic2URL = news2.image_url;
                    document.getElementById('news2Img').src = pic2URL;

                    let news3 = newsArr[2];
                    let title3 = news3.title;
                    let url3 = news3.url;
                    let a3 = document.createElement('a');
                    a3.setAttribute('href', url3);
                    a3.innerText = title3;
                    document.getElementById('news3Title').appendChild(a3);
                    let desc3 = news3.description;
                    document.getElementById('news3Desc').innerText = desc3;
                    let pic3URL = news3.image_url;
                    document.getElementById('news3Img').src = pic3URL;
                })
                .catch(error => {
                    console.log(error.message);
                });
        </script>

        <!-- display food insecurity data and charts-->
        <div>
            <h1 class="heading">Food insecurity around the world</h1>

            <div>
                <h3>As of September 30 2024:
                    <ul>
                        <li>The number of people projected to be in food insecurity and malnutrition catastrophe
                            (Integrated Food Security Phase Classification (IPC) Phase 5) has surged, increasing from
                            705,000 in 2023 to 1.9 million in 2024.</li>
                        <li>Global undernourishment remains alarmingly persistent, with an estimated 713 million to 757
                            million people affected in 2023.</li>
                    </ul>
                </h3>
            </div>

            <br><br>

            <div>
                <canvas id="barChart"></canvas>
                <br>
                <h5>From 2023 peak to mid 2024, there has been an increase of at least 1 million people facing high levels
                    of acute food insecurity in countries like Yemen, Ethiopia, Myanmar, Sudan, Nigeria, Malawi,
                    Zimbabwe, and Chad.
                </h5>
                <br>
                <small>
                    Source: <a
                        href="https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2024-MYU-en.pdf">https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2024-MYU-en.pdf</a>
                </small>
            </div>

            <br><br>

            <div class="row">
                <div class="col-6">
                    <h4># of people in Yemen with high levels of acute food insecurity(IPC/CH phase 3 or above or
                        equivalent) in 2022 <br>( Millions )</h4>
                    <br>
                    <canvas id="doughnutChartYemen"></canvas>
                    <br>
                    <h5>In 2022, IPC/CH phase3+ took up 55% of the whole population of Yemen.</h5>
                </div>
                <div class="col-6">
                    <h4># of people in Afghanistan with high levels of acute food insecurity(IPC/CH phase 3 or above or
                        equivalent) in 2022 <br>( Millions )</h4>
                    <br>
                    <canvas id="doughnutChartAfghan"></canvas>
                    <br>
                    <h5> In 2022, IPC/CH phase3+ took up 46% of the whole population of Afghanistan.</h5>
                </div>
                <br>
                <small>
                    Source: <a
                        href="https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2023-In-Brief-EN.pdf">https://www.fsinplatform.org/sites/default/files/resources/files/GRFC2023-In-Brief-EN.pdf</a>
                </small>
            </div>
        </div>

        <script>
            const bar = document.getElementById('barChart');
            new Chart(bar, {
                type: 'bar',
                data: {
                    labels: ['Yemen', 'Ethiopia', 'Myanmar', 'Sudan', 'Nigeria', 'Malawi', 'Zimbabwe', 'Chad'],
                    datasets: [{
                        label: 'Increase in # of people facing high levels of acute food insecurity between peak 2023 and mid 2024 ( Millions )',
                        data: [1, 2.3, 2.6, 5.3, 6.9, 1.3, 1.5, 1.1],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.3)',
                            'rgba(255, 159, 64, 0.3)',
                            'rgba(255, 205, 86, 0.3)',
                            'rgba(75, 192, 192, 0.3)',
                            'rgba(54, 162, 235, 0.3)',
                            'rgb(0, 0, 139,0.3)',
                            'rgba(153, 102, 255, 0.3)',
                            'rgba(201, 203, 207, 0.3)',
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(255, 159, 64)',
                            'rgb(255, 205, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(54, 162, 235)',
                            'rgb(0, 0, 139)',
                            'rgb(153, 102, 255)',
                            'rgb(201, 203, 207)'
                        ],
                        hoverBackgroundColor: [
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                        ],
                        hoverBorderColor: [
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                            'white',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            const doughnutYemen = document.getElementById('doughnutChartYemen');
            new Chart(doughnutYemen, {
                type: 'doughnut',
                data: {
                    labels: ['Phase 3', 'Phase 4', 'Phase 5'],
                    datasets: [{
                        data: [11.7, 5.6, 0.031],
                        hoverBackgroundColor: ['white', 'white', 'white']
                    }]
                }
            });

            const doughnutAfghan = document.getElementById('doughnutChartAfghan');
            new Chart(doughnutAfghan, {
                type: 'doughnut',
                data: {
                    labels: ['Phase 3', 'Phase 4'],
                    datasets: [{
                        data: [13.8, 6.1],
                        backgroundColor: ['purple', 'grey'],
                        hoverBackgroundColor: ['white', 'white']
                    }]
                }
            });
        </script>


        <!--display info on impacts of food insecurity: -->
        <hr>

        <div>
            <h1 class="heading">Impacts of food insecurity</h1>
            <div class="row">
                <div class="col-lg-5">
                    <div id="impact1">
                        <h5 class="issue">Health Issues:</h5>
                        <div v-if="showPic" v-on:mouseover="showPic=false">
                            <img src="./images/malnutrition.png" width="500" height="300"></img>
                        </div>
                        <div v-else v-on:mouseout="showPic=true">
                            <h5 class="impactText">Food insecurity can lead to malnutrition, which can cause slower
                                growth in children,
                                weakened immune systems, and increased susceptibility to diseases. Chronic hunger can
                                also
                                contribute to
                                conditions such as anemia, heart disease, and diabetes.
                            </h5>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2"></div>
                <div class="col-lg-5">
                    <div id="impact2">
                        <h5 class="issue">Social Inequality:</h5>
                        <div v-if="showPic" v-on:mouseover="showPic=false">
                            <img src="./images/social.png" width="500" height="300"></img>
                        </div>
                        <div v-else v-on:mouseout="showPic=true">
                            <h5 class="impactText">
                                Food insecurity often disproportionately affects marginalized
                                communities, worsening
                                existing inequalities in society and leading to social unrest or migration as people
                                seek
                                more stable
                                sources of food and livelihoods elsewhere.
                            </h5>
                        </div>
                    </div>
                </div>
            </div>

            <br><br>

            <div class="row">
                <div class="col-lg-5">
                    <div id="impact3">
                        <h5 class="issue">Climate Change Effects:</h5>
                        <div v-if="showPic" v-on:mouseover="showPic=false">
                            <img src="./images/climate-chg.png" width="500" height="300"></img>
                        </div>
                        <div v-else v-on:mouseout="showPic=true">
                            <h5 class="impactText">As climate change intensifies, extreme weather events like droughts,
                                floods, and
                                heatwaves
                                become more frequent, exacerbating food shortages. At the same time, food-insecure
                                regions
                                often rely on
                                unsustainable agricultural practices (like slash-and-burn) that contribute to greenhouse
                                gas
                                emissions, further worsening climate change and the environment we live in.</h5>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2"></div>
                <div class="col-lg-5">
                    <div id="impact4">
                        <h5 class="issue">Biodiversity Loss:</h5>
                        <div v-if="showPic" v-on:mouseover="showPic=false">
                            <img src="./images/biodiversity-loss.png" width="500" height="300"></img>
                        </div>
                        <div v-else v-on:mouseout="showPic=true">
                            <h5 class="impactText">The conversion of forests, wetlands, and grasslands into agricultural
                                land due to the
                                pressure to grow more food can severely disrupt ecosystems and lead to the extinction of
                                species.
                            </h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <!-- display 3 latest food insecurity news using data retrieved frm api: -->
        <div>
            <h1 class="heading">Latest food waste news</h1>
            <!-- display news links, title, desc and img-->
            <div class="row">
                <div class="col-lg-1"></div>
                <div class="col-lg-3">
                    <div class="card" style="width: 18rem;">
                        <img class="card-img-top" id="news1Img">
                        <div class="card-body">
                            <h5 class="card-title" id="news1Title"></h5>
                            <p class="card-text" id="news1Desc"></p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1"></div>
                <div class="col-lg-3">
                    <div class="card" style="width: 18rem;">
                        <img class="card-img-top" id="news2Img">
                        <div class="card-body">
                            <h5 class="card-title" id="news2Title"></h5>
                            <p class="card-text" id="news2Desc"></p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1"></div>
                <div class="col-lg-3">
                    <div class="card" style="width: 18rem;">
                        <img class="card-img-top" id="news3Img">
                        <div class="card-body">
                            <h5 class="card-title" id="news3Title"></h5>
                            <p class="card-text" id="news3Desc"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        Vue.createApp({
            data() {
                return {
                    showPic: true
                }
            }
        }).mount('#impact1')

        Vue.createApp({
            data() {
                return {
                    showPic: true
                }
            }
        }).mount('#impact2')

        Vue.createApp({
            data() {
                return {
                    showPic: true
                }
            }
        }).mount('#impact3')

        Vue.createApp({
            data() {
                return {
                    showPic: true,
                }
            }
        }).mount('#impact4') 
    </script>


    <!-- bootstrap js-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>